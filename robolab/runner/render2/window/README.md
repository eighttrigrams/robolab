Code taken from https://github.com/moderngl/moderngl and modified afterwards